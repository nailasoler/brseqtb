/*
 * brseqtb â€” Nextflow configuration
 * Minimal, explicit, predictable.
 */

nextflow.enable.dsl = 2

process {
    executor = 'local'
    shell = ['/bin/bash', '-euo', 'pipefail']
    errorStrategy = 'terminate'

    // Ensure micromamba env tools are available to all processes
    beforeScript = '''
      export MAMBA_ROOT_PREFIX="$projectDir/.micromamba"
      export PATH="$MAMBA_ROOT_PREFIX/envs/brseqtb/bin:$projectDir/bin:$PATH"
    '''
}

workDir = 'work'

trace {
    enabled = true
    file = 'logs/trace.txt'
    overwrite = true
}

timeline {
    enabled = true
    file = 'logs/timeline.html'
    overwrite = true
}

report {
    enabled = true
    file = 'logs/report.html'
    overwrite = true
}

dag {
    enabled = true
    file = 'logs/dag.html'
    overwrite = true
}

